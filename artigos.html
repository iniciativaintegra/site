<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Artigos</title>
    <link rel="shortcut icon" href="img/LogoTab.png" type="image/x-icon" />
    <link rel="stylesheet" href="styles/style.css" media="all" />
    <link rel="stylesheet" href="styles/media-query.css" />
    <script src="backend/script.js"></script>
    <!-- Carregando jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body id="body" class="body">
    <header>
        <a href="index.html">
            <div class="logo"><img src="img/INlogo.png" alt=""></div>
        </a>
        <div class="menu-icon" onclick="toggleMenu()">
            <div class="bar1"></div>
            <div class="bar2"></div>
            <div class="bar3"></div>
        </div>
        <nav class="menu">
            <div class="menu-item">
                <a href="#">Sobre ▼</a>
                <div class="submenu">
                    <a href="conhecaaequipe.html">Conheça a Equipe</a>
                    <a href="contato.html">Contato</a>
                    <a href="projetos.html">Projetos</a>
                    <a href="sobre.html">Sobre a Iniciativa</a>
                </div>
            </div>
            <div class="menu-item">
                <a href="#">Recursos ▼</a>
                <div class="submenu-resources">
                    <a href="educacao.html">Educação e Recursos</a>
                    <a href="apoiopsicologico.html">Apoio Psicológico</a>
                </div>
            </div>
            <a href="artigos.html">Artigos</a>
            <a href="voluntariese.html">Voluntarie-se</a>
            <a href="areaequipe.html">Área da equipe</a>
        </nav>
    </header>
    <div class="overlay" id="overlay"></div>
    <div class="mobile-menu" id="mobileMenu">
        <a href="sobre.html">Sobre</a>
        <a href="areaequipe.html">Área da Equipe</a>
        <a href="artigos.html">Artigos</a>
        <a href="contato.html">Contato</a>
        <a href="voluntariese.html">Voluntarie-se</a>
        <a href="educacao.html">Educação e Recursos</a>
        <a href="projetos.html">Projetos</a>
        <a href="conhecaaequipe.html">Conheça a Equipe</a>
        <a href="apoiopsicologico.html">Apoio Psicológico</a>
    </div>

    <main>
        <h2 id="sobreh2">Artigos</h2>
        <section id="artigosSection">
            <!-- Aqui serão inseridos dinamicamente os artigos -->
        </section>
    </main>

    <footer id="footer">
        <a href="https://instagram.com/iniciativaintegra">
            <div><img src="img/ig.svg" alt=""></div>
        </a>
        <p>Iniciativa Integra. Todos os direitos reservados. 2024.</p>
    </footer>

    <script>
       $(document).ready(function () {
    $.ajax({
        url: 'https://script.google.com/macros/s/AKfycbyZeU74ZaYb9T51VikORPpUiqkvy23YJ0z5e6ISPfz6t9keYvnl_IyHhDp5cf6GQbmW/exec',
        type: 'GET',
        dataType: 'json', // Isso garantirá que a resposta seja interpretada como JSON automaticamente
        success: function (response) {
            console.log(response); // Adiciona um log para ver a resposta bruta
            try {
                var artigos = response; // Se dataType for 'json', response já é um objeto
                var artigosHTML = '';

                artigos.forEach(function (artigo) {
                    artigosHTML += `
                    <center>
                        <div class="artigo">
                            <div class="tit-artigo"><h2>${artigo.titulo}</h2></div>
                            <div class="cont-autor">
                                <p class="conteudo">${artigo.artigo}</p>
                                <p class="autor">By: ${artigo.nomeautor}</p>
                                <p class="data">Data de envio: ${artigo.data}</p>
                            </div>
                        </div>
                        </center>
                    `;
                });

                $('#artigosSection').html(artigosHTML);
            } catch (error) {
                console.error("Erro ao processar a resposta JSON: ", error);
                alert('Erro ao carregar os artigos.');
            }
        },
        error: function () {
            alert('Erro ao carregar os artigos.');
        }
    });
});
    </script>
</body>

</html>
